# CSS3 ä¹‹ 3D å˜æ¢

[TOC]

---

> æˆ‘ä»¬å¤§å¤šæ•°åŒå­¦æ¥è§¦çš„ CSS3: transform å±æ€§å€¼ä¸€èˆ¬éƒ½æ˜¯ 2D å˜æ¢ï¼Œæ¯”å¦‚ ï¼š
>
> - å¹³ç§»æ“ä½œï¼štranslateX()ï¼ŒtranslateY()ï¼Œäº¦æˆ–æ˜¯ translate(x,y)ã€‚
> - æ—‹è½¬æ“ä½œï¼šrotate()
>
> ä»Šå¤©æˆ‘ä»¬å°±æ¥å­¦ä¹ å¹¶ä¸”æ·±å…¥ç†è§£ CSS3 ä¸­çš„ 3D å˜æ¢ï¼

## CSS3 ä¸­ 3D çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ

**åœ¨è®¨è®º 3D ä¹‹å‰æˆ‘ä»¬å…ˆè¦å¯¹ä¸€äº›åŸºæœ¬æ¦‚å¿µåšä¸€äº›ç†è§£ã€‚**

### 3D åæ ‡ç³»

è¯ä¸å¤šè¯´å…ˆä¸Šå›¾ï¼š

![img](./images/3Dåæ ‡ç³».jpg)

æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨æµè§ˆå™¨ä¸­ï¼Œæ˜¯ä»¥å·¦ä¸Šè§’çš„é¡¶ç‚¹ä½œä¸ºåŸç‚¹ï¼Œå‘å³ã€å‘ä¸‹ä¸ºæ­£æ–¹å‘çš„çš„è§†çª—ã€‚å…¶ä¸­æ¨ªå‘ä¸º X è½´ï¼Œçºµå‘ä¸º Y è½´ã€‚è€Œå¯¹äºä¸‰ç»´ç©ºé—´ä¸­çš„ Z è½´ï¼Œè‡ªç„¶æ˜¯æŒ‡å‚ç›´ä¸è¯¥ X è½´ä¸ Y è½´æ‰€æ„å»ºçš„å¹³é¢ä¸”ç©¿è¿‡åŸç‚¹çš„ç›´çº¿ã€‚å¯¹äºäºŒç»´è§†å›¾è€Œè¨€ç”±äº X è½´ä¸ Y è½´å§‹ç»ˆç¡®å®šï¼Œæ‰€ä»¥ Z è½´ä¹Ÿæ˜¯ç¡®å®šçš„ï¼šå³ç©¿è¿‡çª—å£å·¦ä¸Šè§’ä¸”ä¸å±å¹•å‚ç›´çš„ç›´çº¿ã€‚å±å¹•çš„å‰æ–¹ä¸ºæ­£æ–¹å‘ã€‚

> ä½†æ˜¯è¿™é‡Œå®¹æ˜“äº§ç”Ÿä¸€ä¸ª**è¯¯è§£**ï¼š_è¯¯ä»¥ä¸ºä¸‰ç»´ç©ºé—´ä¸­çš„ Z è½´ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œå’ŒäºŒç»´è§†å›¾çš„ Z è½´æ˜¯åŒä¸€æ ¹è½´çº¿ã€‚_

Z è½´çœŸæ­£çš„å«ä¹‰æ˜¯å‚ç›´ä¸ X è½´ä¸ Y è½´æ‰€æ„æˆçš„é¢ä¸”ç©¿è¿‡åŸç‚¹çš„ç›´çº¿ã€‚é‚£ä¹ˆå½“è¿™ä¸ªé¢å‘é€æ—‹è½¬æˆ–å¹³ç§»çš„æ—¶å€™ï¼ŒZ è½´ä¹Ÿæ˜¯éšä¹‹è€Œå˜çš„ï¼è¿™é‡Œæˆ‘ç”¨ä¸€å¼ å›¾ç‰‡è¿›è¡Œè¯´æ˜ï¼š

![](./images/å˜æ¢çš„Zè½´.png)

è¿™é‡Œçš„æ¯æ ¹çº¢è½´ä¸º Z è½´ï¼Œåˆ†åˆ«å‚ç›´äºå„è‡ªçš„é¢ï¼

### perspective å±æ€§

perspective çš„å­—é¢æ„æ€å¦‚ä¸‹ï¼š

![](./images/perspective.png)

è¿‘å¤§è¿œå°åœ¨äºŒç»´å¹³é¢ä¸Šæ˜¯æ— æ³•ä½“ç°çš„ï¼Œä½†æ˜¯åœ¨ä¸‰ç»´ç©ºé—´ä¸­ç¦»æˆ‘ä»¬çœ¼çƒè¶Šè¿‘çš„äº‹ç‰©æ˜¯è¶Šæ¥è¶Šå¤§çš„ã€‚

è€Œ perspective è¿™ä¸ªå±æ€§å®šä¹‰çš„å…¶å®æ˜¯æˆ‘ä»¬ç¦»ç”»é¢å‡å®šçš„åˆå§‹åƒç´ è·ç¦»ã€‚

![](./images/perspectiveExample.png)

_è¿™å¼ å›¾è´¹å°½äº†æ¯•ç”Ÿçš„ç»˜ç”»å¤©èµ‹ã€‚ã€‚ã€‚_

åŠ å…¥æˆ‘ä»¬å®šä¹‰äº†è¿™ä¹ˆä¸€ä¸ªå±æ€§ï¼š

```css
perspective: 800px;
```

é‚£ä¹ˆæˆ‘ä»¬å°±å‡å®šæˆ‘ä»¬çš„çœ¼çƒè¿™ä¸€è§†ç‚¹åˆ°è¯¥å±æ€§æ‰€åœ¨çš„å…ƒç´ ä¹‹é—´çš„è·ç¦»æ˜¯ 800pxã€‚ï¼ˆæœ‰ä¸€ä¸ªå‰æï¼šè¯¥å…ƒç´  X è½´ä¸ Y è½´æ‰€æ„æˆçš„å¹³é¢ä¸çª—å£å¹³é¢å¹³è¡Œã€‚ï¼‰å®é™…ä¸Šåœ¨è¿™é‡Œäººçœ¼åˆ° X è½´ä¸ Y è½´æ‰€æ„æˆçš„å¹³é¢çš„è·ç¦»å°±æ˜¯ 800pxï¼ˆZ è½´æ–¹å‘ï¼‰ã€‚

å¦‚æœå¹³é¢å‘ç”Ÿäº†æ—‹è½¬ï¼Œ**è§†ç‚¹ä¹Ÿæ˜¯ä¼šè·Ÿç€æ—‹è½¬çš„**ï¼

é‚£ä¹ˆæœ‰åŒå­¦å°±ä¼šé—®äº†ï¼šè¿™ä¸ªå±æ€§åˆ°åº•æœ‰å•¥ç”¨ï¼Ÿå…ˆåˆ«æ€¥å˜›ï¼

å¦‚æœè¿™ä¸ªå…ƒç´ ä¹‹åé€šè¿‡ä¸‰ç»´å˜æ¢ç¦»æˆ‘ä»¬çš„è·ç¦»å˜è¿‘äº†ï¼Œé‚£ä¹ˆä»–ä»¬å‘ˆç°åœ¨æˆ‘ä»¬çœ¼å‰çš„å¤§å°å°†å˜å¤§ï¼Œåä¹‹å˜å°ã€‚ï¼ˆè¿‘å¤§è¿œå°ï¼‰è¿™ä¸€ç‰¹æ€§å¹¶ä¸æ˜¯è¡¨é¢çœ‹çš„é‚£ä¹ˆç®€å•ï¼Œå°±æ‹¿ä¹‹å‰æˆ‘ä»¬å‡è®¾å®šä¹‰çš„é‚£ä¸ªå±æ€§å’Œé‚£å¼ æˆ‘ç”»çš„å›¾è¯´ï¼šæ„æ€ä¹Ÿå°±æ˜¯æˆ‘çš„çœ¼çƒå’Œæˆ‘çœ‹åˆ°çš„å…ƒç´ ä¹‹é—´æœ‰ 800px çš„é•¿åº¦ï¼Œè¿™æ—¶å€™æˆ‘è®©è¯¥å…ƒç´ æ²¿ç€ Z è½´çš„æ­£æ–¹é¡¹å¹³ç§» 801px çš„è·ç¦»ã€‚å¹³ç§»ä¹‹åä½ ä¼šå‘ç°ä½ çœ‹ä¸åˆ°è¿™ä¸ªå…ƒç´ äº†ï¼Œç©¶å…¶åŸå› æ˜¯å› ä¸ºè¿™ä¸ªå›¾ç‰‡åœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œå·²ç»è·‘åˆ°ä½ çœ¼çƒçš„åé¢äº†ï¼æ‰€ä»¥ä½ å½“ç„¶çœ‹ä¸åˆ°äº†ã€‚

### transform-style: preserve-3d;

è¿™ä¸€å±æ€§å€¼çš„è®¾å®šå°±åƒæ˜¯ä¸€ä¸ª 3D æ§ä»¶çš„å£°æ˜ï¼Œå‘Šè¯‰æµè§ˆå™¨çš„æ¸²æŸ“å¼•æ“æ¥ä¸‹æ¥çš„å­å…ƒç´ éœ€è¦æŒ‰ç…§ 3D æ¨¡å¼è¿›è¡Œæ¸²æŸ“ï¼ï¼ˆé»˜è®¤ 2D æ¨¡å¼ï¼‰æ‰€ä»¥è¯¥å±æ€§åº”è¯¥**è®¾ç½®åœ¨çˆ¶å®¹å™¨ä¹‹ä¸­**ï¼

æ³¨æ„è¯¥å…ƒç´ **ä¸å…·æœ‰ç»§æ‰¿æ€§**ï¼ï¼ä½†æ˜¯è¯¥å…ƒç´ **ä¸å…·æœ‰ç»§æ‰¿æ€§**ï¼ï¼ä½†æ˜¯è¯¥å…ƒç´ **ä¸å…·æœ‰ç»§æ‰¿æ€§**ï¼ï¼ï¼ˆé‡è¦çš„äº‹æƒ…è¯´ä¸‰éã€‚ã€‚ã€‚ï¼‰

### perspective-origin å±æ€§

> å¼•ç”¨ W3C çš„è¯ï¼šperspective-origin å±æ€§å®šä¹‰ 3D å…ƒç´ æ‰€åŸºäºçš„ X è½´å’Œ Y è½´ã€‚è¯¥å±æ€§å…è®¸æ‚¨æ”¹å˜ 3D å…ƒç´ çš„åº•éƒ¨ä½ç½®ã€‚
>
> å½“ä¸ºå…ƒç´ å®šä¹‰ perspective-origin å±æ€§æ—¶ï¼Œå…¶å­å…ƒç´ ä¼šè·å¾—é€è§†æ•ˆæœï¼Œè€Œä¸æ˜¯å…ƒç´ æœ¬èº«ã€‚
>
> **æ³¨é‡Š**ï¼šè¯¥å±æ€§å¿…é¡»ä¸ perspective å±æ€§ä¸€åŒä½¿ç”¨ï¼Œè€Œä¸”åªå½±å“ 3D è½¬æ¢å…ƒç´ 

ç”¨ç™½è¯ç¿»è¯‘ä¸€ä¸‹ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ï¼šé€è§†ç‚¹çš„ä½ç½®ã€‚

![](./images/é€è§†ç‚¹.png)

é€è§†ç‚¹çš„é»˜è®¤å€¼ä¸º 50% 50%ï¼Œä¹Ÿä¸å…·å¤‡ç»§æ‰¿æ€§ã€‚è¯¥å±æ€§å¿…é¡»ä¸ perspective å±æ€§ä¸€åŒä½¿ç”¨ï¼Œè€Œä¸”åªå½±å“ 3D è½¬æ¢å…ƒç´ ã€‚

### translateZ(), rotateX(), rotateY(), rotateZ()

æœ‰äº†å‰é¢çš„çŸ¥è¯†ä½œä¸ºé“ºå«ï¼Œå¹³ç§»ã€æ—‹è½¬ç†è§£èµ·æ¥ä¹Ÿå°±å®¹æ˜“äº†ã€‚

- translateZ()ï¼šæ²¿ç€ Z è½´å¹³ç§»
- rotateX()ï¼šæ²¿ç€ X è½´æ—‹è½¬
- rotateY()ï¼šæ²¿ç€ Y è½´æ—‹è½¬
- rotateZ()ï¼šæ²¿ç€ Z è½´æ—‹è½¬

**æ—‹è½¬çš„æ­£æ–¹å‘ï¼š**ç½‘é¡µçª—å£éƒ½æ˜¯å·¦æ‰‹åæ ‡ç³»ï¼Œæ‰€ä»¥åº”å½“ç”¨å·¦æ‰‹åˆ¤æ–­æ—‹è½¬çš„æ­£æ–¹å‘ã€‚

**å…·ä½“åˆ¤æ–­æ–¹æ³•ï¼š**å·¦æ‰‹æ¡ä½æ‹³å¤´ï¼Œæ‹‡æŒ‡åªæƒ³æ—‹è½¬è½´çš„æ­£æ–¹å‘ï¼Œå››æŒ‡å¼¯æ›²çš„æ–¹å‘å°±æ˜¯æ—‹è½¬çš„æ­£æ–¹å‘ã€‚

![](./images/æ—‹è½¬æ­£æ–¹å‘.jpg)

## CSS3 ä¸­ 3D çš„ä¸€äº›æ¡ˆä¾‹

### é­”æ–¹

**æ•ˆæœå›¾ï¼š**

![](./images/cube.gif)

**è¦å®ç°ä¸€ä¸ªæ­£æ–¹ä½“å¯ä»¥é€šè¿‡å…­ä¸ªé¢æ—‹è½¬åæ²¿ç€å„è‡ªçš„ Z è½´è¿›è¡Œå¹³ç§»è·å¾—**

```html
<div class="cube">
  <div class="cover cover_front"></div>
  <div class="cover cover_back"></div>
  <div class="cover cover_left"></div>
  <div class="cover cover_right"></div>
  <div class="cover cover_top"></div>
  <div class="cover cover_bottom"></div>
</div>
```

```css
.cube {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(0deg);
  width: 250px;
  height: 250px;
  transform-style: preserve-3d;
  perspective: 1000px;
  animation: rotate 5s linear infinite;
}
@keyframes rotate {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  100% {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}
.cover {
  position: absolute;
  width: 250px;
  height: 250px;
  box-shadow: 0 0 25px 5px #ffffff inset;
}
.cover_front {
  transform: rotateX(45deg) rotateY(45deg) translateZ(125px);
}
.cover_back {
  transform: rotateX(45deg) rotateY(45deg) translateZ(-125px);
}
.cover_left {
  transform: rotateX(45deg) rotateY(135deg) translateZ(125px);
}
.cover_right {
  transform: rotateX(45deg) rotateY(-45deg) translateZ(125px);
}
.cover_top {
  transform: rotateX(135deg) rotateZ(45deg) translateZ(125px);
}
.cover_bottom {
  transform: rotateX(-45deg) rotateZ(-45deg) translateZ(125px);
}
```

### ç‚«å½©å‘å…‰çƒ

**æ•ˆæœå›¾ï¼š**

![](./images/ball.gif)

é€šè¿‡ç»™æ¯ä¸ªè‰²æ–‘ä¸åŒçš„æ—‹è½¬è§’åº¦ï¼Œå¹¶ä¸”åŠ ä»¥åŠ¨ç”»çš„å½¢å¼ä½“ç°ã€‚

```html
<div class="ball">
  .spot*100
</div>
```

**ç”±äº html é¡µé¢ä¸­è®¾å®šäº† 100 ä¸ªç±»åä¸º spot çš„ divï¼Œè€Œä¸”æ¯ä¸ª sopt åˆå§‹çš„æ ·å¼éƒ½æ˜¯ä¸åŒçš„ï¼Œä¸”è¿åŠ¨è½¨è¿¹ä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿™é‡Œç”¨ css é¢„ç¼–è¯‘è¯­è¨€ stylus æ¥è¿›è¡Œå®ç°ã€‚**

```stylus
vendors = official

random(min,max)
  return floor(math(0, 'random')*(max - min + 1) + min)

*
  margin 0
  padding 0

html
body
  width 100vw
  height 100vh
  background-color #000000

.ball
  width 10px
  height 10px
  top 50%
  left 50%
  transform: translate(-50%, -50%)
  position relative
  transform-style: preserve-3d
  perspective: 1000px

.spot
  width 10px
  height 10px
  position absolute
  border-radius: 50%

animation(n)
  animation twinkle+n 20s linear infinite

getdifference()
  transform: rotateX(unit(random(0,360),'deg')) rotateY(unit(random(0,360),'deg')) translateZ(50px)
  background-color rgba(random(0,255),random(0,255),random(0,255),random(0,1))

for num in 1..100
  .spot:nth-child({num})
    $xDeg = random(0,360)
    $yDeg = random(0,360)
    $red = random(0,255)
    $green = random(0,255)
    $blue = random(0,255)
    $alpha = random(0,1)
    transform: rotateX(unit($xDeg,'deg')) rotateY(unit($yDeg,'deg')) translateZ(50px)
    background-color rgba($red,$green,$blue,$alpha)
    animation num
    @keyframes twinkle{num}
      20%
        getdifference()
      40%
        getdifference()
      60%
        getdifference()
      80%
        getdifference()
      100%
        transform: rotateX(unit($xDeg,'deg')) rotateY(unit($yDeg,'deg')) translateZ(50px)
        background-color rgba($red,$green,$blue,$alpha)
```

---

ç¬”è€…ä¸“é—¨åœ¨ github ä¸Šåˆ›å»ºäº†ä¸€ä¸ªä»“åº“ï¼Œç”¨äºè®°å½•å¹³æ—¶å­¦ä¹ å…¨æ ˆå¼€å‘ä¸­çš„æŠ€å·§ã€éš¾ç‚¹ã€æ˜“é”™ç‚¹ï¼Œæ¬¢è¿å¤§å®¶ç‚¹å‡»ä¸‹æ–¹é“¾æ¥æµè§ˆã€‚å¦‚æœè§‰å¾—è¿˜ä¸é”™ï¼Œå°±è¯·ç»™ä¸ªå°æ˜Ÿæ˜Ÿå§ï¼ğŸ‘

---

2019/03/30

[AJie](https://github.com/KevinSalvatore/FullStackPoints.git)
